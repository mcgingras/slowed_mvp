{"ast":null,"code":"var _jsxFileName = \"/Users/mcgingras/Projects/slowed/app/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay); // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed ...\n    // .. within the delay period. Timeout gets cleared and restarted.\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\nfunction App() {\n  const [token, setToken] = useState('');\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [query, setQuery] = useState('drake');\n  const [tracks, setTracks] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const debouncedQuery = useDebounce(query, 500); // fetch the Spotify API token from the URL params.\n\n  useEffect(() => {\n    let urlstring = window.location.href;\n    let url = new URL(urlstring);\n    let c = url.searchParams.get('access_token');\n\n    if (c) {\n      setLoggedIn(true);\n      setToken(c);\n    }\n  }, []);\n\n  const searchSpotify = q => {\n    return fetch(`https://api.spotify.com/v1/search/?q=${q}&type=track`, {\n      method: 'GET',\n      headers: new Headers({\n        'Authorization': `Bearer ${token}`\n      })\n    }).then(res => res.json());\n  }; // Effect for API call \n\n\n  useEffect(() => {\n    if (debouncedQuery) {\n      setIsSearching(true);\n      searchSpotify(debouncedQuery).then(results => {\n        setIsSearching(false);\n        console.log(results.tracks.items);\n        setTracks(results.tracks.items);\n      });\n    } else {\n      setTracks([]);\n    }\n  }, [debouncedQuery] // Only call effect if debounced search term changes\n  );\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mx-auto \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-red-500\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"SPOTIFY SLOWED\")), !isLoggedIn ? /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 22\n    }\n  }, \"login\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Search Spotify\",\n    onChange: e => setQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      searchSpotify();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, \"Search Spotify\"), isSearching && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 27\n    }\n  }, \"Searching ...\"), tracks.map(result => /*#__PURE__*/React.createElement(\"div\", {\n    key: result.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, result.name)))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mcgingras/Projects/slowed/app/src/App.js"],"names":["React","useState","useEffect","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","App","token","setToken","isLoggedIn","setLoggedIn","query","setQuery","tracks","setTracks","isSearching","setIsSearching","debouncedQuery","urlstring","window","location","href","url","URL","c","searchParams","get","searchSpotify","q","fetch","method","headers","Headers","then","res","json","results","console","log","items","e","target","map","result","id","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n\n\nfunction App() {\n\n  const [token, setToken] = useState('');\n  const [isLoggedIn, setLoggedIn] = useState(false);\n\n  const [query, setQuery] = useState('drake');\n  const [tracks, setTracks] = useState([])\n  const [isSearching, setIsSearching] = useState(false);\n  const debouncedQuery = useDebounce(query, 500);\n\n  // fetch the Spotify API token from the URL params.\n  useEffect(() => {\n    let urlstring = window.location.href;\n    let url = new URL(urlstring);\n    let c = url.searchParams.get('access_token');\n\n\n    if (c) {\n      setLoggedIn(true);\n      setToken(c);\n    }\n  }, [])\n\n  const searchSpotify = (q) => {\n    return fetch(`https://api.spotify.com/v1/search/?q=${q}&type=track`, {\n      method: 'GET',\n      headers: new Headers({\n        'Authorization': `Bearer ${token}`,\n      }),\n    })\n      .then(res => res.json())\n  }\n\n  // Effect for API call \n  useEffect(\n    () => {\n      if (debouncedQuery) {\n        setIsSearching(true);\n        searchSpotify(debouncedQuery).then(results => {\n          setIsSearching(false);\n          console.log(results.tracks.items)\n          setTracks(results.tracks.items);\n        });\n      } else {\n        setTracks([]);\n      }\n    },\n    [debouncedQuery] // Only call effect if debounced search term changes\n  );\n\n\n\n  return (\n    <div className=\"container mx-auto \">\n      <div>\n        <h1 className=\"text-red-500\">SPOTIFY SLOWED</h1>\n      </div>\n      {!isLoggedIn ? <a href=\"http://localhost:8888/login\">login</a> :\n        <div>\n          <input\n            type=\"text\"\n            placeholder=\"Search Spotify\"\n            onChange={e => setQuery(e.target.value)}\n          />\n          <button onClick={() => { searchSpotify() }}>Search Spotify</button>\n          {isSearching && <div>Searching ...</div>}\n          {tracks.map(result => (\n            <div key={result.id}>\n              <h4>{result.name}</h4>\n              {/* <img\n                src={`${result.album.images[0].url}`}\n              /> */}\n            </div>\n          ))}\n        </div>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}