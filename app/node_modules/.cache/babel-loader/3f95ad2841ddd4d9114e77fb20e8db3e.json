{"ast":null,"code":"var _jsxFileName = \"/Users/mcgingras/Projects/slowed/app/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay); // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed ...\n    // .. within the delay period. Timeout gets cleared and restarted.\n\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay] // Only re-call effect if value or delay changes\n  );\n  return debouncedValue;\n}\n\nfunction App() {\n  const [token, setToken] = useState('');\n  const [isLoggedIn, setLoggedIn] = useState(false);\n  const [query, setQuery] = useState('');\n  const [tracks, setTracks] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const debouncedQuery = useDebounce(query, 500);\n  const [activeSong, setActiveSong] = useState(null); // fetch the Spotify API token from the URL params.\n\n  useEffect(() => {\n    let urlstring = window.location.href;\n    let url = new URL(urlstring);\n    let c = url.searchParams.get('access_token');\n\n    if (c) {\n      setLoggedIn(true);\n      setToken(c);\n    }\n  }, []);\n\n  const searchSpotify = q => {\n    return fetch(`https://api.spotify.com/v1/search/?q=${q}&type=track`, {\n      method: 'GET',\n      headers: new Headers({\n        'Authorization': `Bearer ${token}`\n      })\n    }).then(res => res.json());\n  }; // Effect for API call \n\n\n  useEffect(() => {\n    if (debouncedQuery) {\n      setIsSearching(true);\n      searchSpotify(debouncedQuery).then(results => {\n        setIsSearching(false);\n        console.log(results.tracks.items);\n        setTracks(results.tracks.items);\n      });\n    } else {\n      setTracks([]);\n    }\n  }, [debouncedQuery] // Only call effect if debounced search term changes\n  );\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mx-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"text-2xl font-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"SPOTIFY SLOWED\")), !isLoggedIn ? /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:8888/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 22\n    }\n  }, \"login\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"border mt-2 w-64\",\n    type: \"text\",\n    placeholder: \"Search Spotify\",\n    onChange: e => setQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }), isSearching && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, \"Searching ...\"), tracks.map(result => /*#__PURE__*/React.createElement(\"div\", {\n    key: result.id,\n    className: \"hover:bg-gray-200 w-64\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, result.name))))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mcgingras/Projects/slowed/app/src/App.js"],"names":["React","useState","useEffect","useDebounce","value","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","App","token","setToken","isLoggedIn","setLoggedIn","query","setQuery","tracks","setTracks","isSearching","setIsSearching","debouncedQuery","activeSong","setActiveSong","urlstring","window","location","href","url","URL","c","searchParams","get","searchSpotify","q","fetch","method","headers","Headers","then","res","json","results","console","log","items","e","target","map","result","id","name"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(\n    () => {\n      // Update debounced value after delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value);\n      }, delay);\n\n      // Cancel the timeout if value changes (also on delay change or unmount)\n      // This is how we prevent debounced value from updating if value is changed ...\n      // .. within the delay period. Timeout gets cleared and restarted.\n      return () => {\n        clearTimeout(handler);\n      };\n    },\n    [value, delay] // Only re-call effect if value or delay changes\n  );\n\n  return debouncedValue;\n}\n\n\nfunction App() {\n\n  const [token, setToken] = useState('');\n  const [isLoggedIn, setLoggedIn] = useState(false);\n\n  const [query, setQuery] = useState('');\n  const [tracks, setTracks] = useState([])\n  const [isSearching, setIsSearching] = useState(false);\n  const debouncedQuery = useDebounce(query, 500);\n\n  const [activeSong, setActiveSong] = useState(null);\n\n  // fetch the Spotify API token from the URL params.\n  useEffect(() => {\n    let urlstring = window.location.href;\n    let url = new URL(urlstring);\n    let c = url.searchParams.get('access_token');\n\n\n    if (c) {\n      setLoggedIn(true);\n      setToken(c);\n    }\n  }, [])\n\n  const searchSpotify = (q) => {\n    return fetch(`https://api.spotify.com/v1/search/?q=${q}&type=track`, {\n      method: 'GET',\n      headers: new Headers({\n        'Authorization': `Bearer ${token}`,\n      }),\n    })\n      .then(res => res.json())\n  }\n\n  // Effect for API call \n  useEffect(\n    () => {\n      if (debouncedQuery) {\n        setIsSearching(true);\n        searchSpotify(debouncedQuery).then(results => {\n          setIsSearching(false);\n          console.log(results.tracks.items)\n          setTracks(results.tracks.items);\n        });\n      } else {\n        setTracks([]);\n      }\n    },\n    [debouncedQuery] // Only call effect if debounced search term changes\n  );\n\n\n\n  return (\n    <div className=\"container mx-auto\">\n      <div>\n        <h1 className=\"text-2xl font-bold\">SPOTIFY SLOWED</h1>\n      </div>\n      {!isLoggedIn ? <a href=\"http://localhost:8888/login\">login</a> :\n        <div>\n          <div>\n            <input\n              className=\"border mt-2 w-64\"\n              type=\"text\"\n              placeholder=\"Search Spotify\"\n              onChange={e => setQuery(e.target.value)}\n            />\n            {isSearching && <div>Searching ...</div>}\n            {tracks.map(result => (\n              <div key={result.id} className=\"hover:bg-gray-200 w-64\">\n                <h4>{result.name}</h4>\n                {/* <img\n                src={`${result.album.images[0].url}`}\n              /> */}\n              </div>\n            ))}\n          </div>\n        </div>\n      }\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}